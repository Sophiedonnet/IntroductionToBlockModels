# a=interaction$new(matrix(rbinom(100,1,.1),10,10),c(1),"SBM")
# a$mat
# a$gr
# a$type
#
#
# collection_interaction=R6Class("collection_interaction",
#                                public = list(
#                                    list_inter=list(),
#                                    initialize=function()
#                                    {
#                                      for (item in list())
#                                        self$add(item)
#                                    },
#                                    add=function(intera)
#                                    {
#                                      self$list_inter=c(self$list_inter,list(intera))
#                                    },
#                                    fctgroups=function()
#                                    {
#                                      o=sapply(self$list_inter,function(obj) return(obj$gr))
#                                      o=unique(unlist(o))
#                                      return(o)
#                                    },
#                                    check = function()
#                                    {
#                                       fgroups=self$fctgroups()
#                                       for (i in )
#                                    }
#                                )
#                                )
#
#
#
#
# b=collection_interaction$new()
# b$add(a)
# c=interaction$new(matrix(rbinom(100,1,.1),10,10),c(1,2),"LBM")
# b$add(c)
# b$list_inter
# b$fctgroups()
#
#
#
#
# interaction_collection=R6Class("interaction_collection",
#                          public=list(
#                             mats_interaction=NULL
#                             tab_groupe
#                          )
#                          private=list(
#                          )
#                          )
data_Vanesse=coll_interaction$new(list(A,inventaire),matrix(c("individuals","individuals","individuals","species"),2,2,byrow = TRUE),type=c("diradj","inc"))
RES_NEW_MODEL <- data_Vanesse$search_nb_clusters(vK_init=c(1,1),Kmin=c(1,1),Kmax=c(10,10))
list_Mat[[2]]+3
t(tau[[1]]%*%list_Mat[[2]]
)
t(tau[[1]])%*%list_Mat[[2]]
t(tau[[2]])%*%list_Mat[[2]]
t(tau[[2]])%*%list_Mat[[1]]
t(tau[[1]])%*%list_Mat[[1]]
t(tau[[1]])%*%list_Mat[[2]]
t(tau[[2]])%*%list_Mat[[2]]
t(tau[[2]])%*%list_Mat[[1]]
tau
summary(list_Mat[[2]])
class(A)
class(list_Mat[[2]])
data_Vanesse=coll_interaction$new(list(A,as.matrix(inventaire)),matrix(c("individuals","individuals","individuals","species"),2,2,byrow = TRUE),type=c("diradj","inc"))
data_Vanesse=coll_interaction$new(list(A,as.matrix(inventaire)),matrix(c("individuals","individuals","individuals","species"),2,2,byrow = TRUE),type=c("diradj","inc"))
RES_NEW_MODEL <- data_Vanesse$search_nb_clusters(vK_init=c(1,1),Kmin=c(1,1),Kmax=c(10,10))
RES_NEW_MODEL <- data_Vanesse$search_nb_clusters(vK_init=c(3,3),Kmin=c(1,1),Kmax=c(10,10))
RES_NEW_MODEL <- data_Vanesse$search_nb_clusters(vK_init=c(4,4),Kmin=c(1,1),Kmax=c(10,10))
best_estim_NEW_MODEL <- RES_NEW_MODEL[[length(RES_NEW_MODEL)]]
param_estim_NEW_MODEL <- best_estim_NEW_MODEL$param_estim
plot_res(data_MIRES,param_estim_NEW_MODEL,mycol=c('green','yellow'),thres=.1)
plot_res(data_Vanesse,param_estim_NEW_MODEL,mycol=c('green','yellow'),thres=.1)
data_Vanesse=coll_interaction$new(list(A),matrix(c("individuals","individuals","individuals"),1,2,byrow = TRUE),type=c("diradj"))
data_Vanesse=coll_interaction$new(list(A),matrix(c("individuals","individuals","individuals"),1,2,byrow = TRUE),type=c("diradj"))
data_Vanesse=coll_interaction$new(list(A),matrix(c("individuals","individuals"),1,2,byrow = TRUE),type=c("diradj"))
RES_NEW_MODEL <- data_Vanesse$search_nb_clusters(vK_init=c(4,4),Kmin=c(1,1),Kmax=c(10,10))
RES_NEW_MODEL <- data_Vanesse$search_nb_clusters(vK_init=c(4),Kmin=c(1),Kmax=c(10))
plot(G)
plot(graph_from_adjacency_matrix(A),mode="directed")
plot(graph_from_adjacency_matrix(A,mode="directed"))
rm(list=ls())
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/rersultatsclusteringespcesetpaysans/")
~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/")
source("./functions/BM_POO.R")
source("../functions/BM_POO.R")
source("../functions/BM_POO.R")
source(".../functions/BM_POO.R")
setwd("./")
getwd()
setwd("../")
getwd()
setwd(".../")
setwd("../")
getwd()
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/")
setwd("../")
getwd()
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/")
source(".../functions/BM_POO.R")
setwd("../../")
setwd("../../")
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/")
setwd("../../")
getwd()
source("../../functions/BM_POO.R")
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/")
source("../../functions/BM_POO.R")
invS1=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_1.csv")
head(invS1)
invS1=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_1.csv",header=TRUE)
head(invS1)
invS2=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_2.csv",header=TRUE)
invS3=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_3.csv",header=TRUE)
invSall=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_all.csv",header=TRUE)
invV1=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_1.csv",header=TRUE)
invV1=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_1.csv",header=TRUE)
invV2=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_2.csv",header=TRUE)
invV3=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_3.csv",header=TRUE)
invVall=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_all.csv",header=TRUE)
circ1=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use1_ind_ssloop.csv",header = TRUE)
circ1=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use1_ind_ssloop.csv",header = TRUE)
circ2=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use2_ind_ssloop.csv",header = TRUE)
circ2=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use3_ind_ssloop.csv",header = TRUE)
circ1=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use1_ind_ssloop.csv",header = TRUE)
circ2=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use2_ind_ssloop.csv",header = TRUE)
circ3=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use3_ind_ssloop.csv",header = TRUE)
circ1
lapply(list(invS1,invS2,invS3,invSall,invV1,invV2,invV3,invVall,circ1,circ2,circ3),function(don){don[don>1]=1})
circ1
dons=list(invS1,invS2,invS3,invSall,invV1,invV2,invV3,invVall,circ1,circ2,circ3)
for (i in 1:length(dons))
length(dons)
length(dons)
dons
for (i in 1:length(dons))
{
dons[[i]][dons[[i]]>1]=1
}
dons[[1]]
invS1
rm(list=ls())
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/")
source("../../functions/BM_POO.R")
invS1=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_1.csv",header=TRUE)
invS2=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_2.csv",header=TRUE)
invS3=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_3.csv",header=TRUE)
invSall=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_all.csv",header=TRUE)
invV1=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_1.csv",header=TRUE)
invV2=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_2.csv",header=TRUE)
invV3=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_3.csv",header=TRUE)
invVall=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_all.csv",header=TRUE)
circ1=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use1_ind_ssloop.csv",header = TRUE)
circ2=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use2_ind_ssloop.csv",header = TRUE)
circ3=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use3_ind_ssloop.csv",header = TRUE)
dons=list(invS1,invS2,invS3,invSall,invV1,invV2,invV3,invVall,circ1,circ2,circ3)
for (i in 1:length(dons))
{
dons[[i]][dons[[i]]>1]=1
dons[[i]]=as.matrix(dons[[i]])
}
data_Espece=coll_interaction$new(list(as.matrix(invS1),as.matrix(inventaire)),matrix(c("individuals","individuals","individuals","species"),2,2,byrow = TRUE),type=c("diradj","inc"))
class(dons[[1]])
dons[c(1:3,9:11)
]
mGP=rbind(c("ind","ind"),c("ind","ind"),c("ind","ind"))
mGP
mGP=rbind(c("ind","Sp1"),c("ind","Sp2"),c("ind","Sp3"),c("ind","ind"),c("ind","ind"),c("ind","ind"))
data_Espece=coll_interaction$new(dons[c(1:3,9:11)],mGP,type=c("diradj","inc"))
isSymmetric(circ1)
isSymmetric.matrix(circ1)
data_Espece=coll_interaction$new(dons[c(1:3,9:11)],mGP,type=c(rep("inc",3),c("diradj"),3))
source("../../functions/BM_POO.R")
source("utils.R")
source("../../functions/BM_POO.R")
source("../../functions/BM_POO.R")
source("../../functions/BM_POO.R")
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/")
source("/functions/BM_POO.R")
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/")
source("/functions/BM_POO.R")
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/")
getwd()
source("functions/BM_POO.R")
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/")
invS1=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_1.csv",header=TRUE)
invS2=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_2.csv",header=TRUE)
invS3=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_3.csv",header=TRUE)
invSall=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_all.csv",header=TRUE)
invV1=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_1.csv",header=TRUE)
invV2=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_2.csv",header=TRUE)
invV3=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_3.csv",header=TRUE)
invVall=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_all.csv",header=TRUE)
circ1=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use1_ind_ssloop.csv",header = TRUE)
circ2=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use2_ind_ssloop.csv",header = TRUE)
circ3=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use3_ind_ssloop.csv",header = TRUE)
dons=list(invS1,invS2,invS3,invSall,invV1,invV2,invV3,invVall,circ1,circ2,circ3)
for (i in 1:length(dons))
{
dons[[i]][dons[[i]]>1]=1
dons[[i]]=as.matrix(dons[[i]])
}
mGP=rbind(c("ind","Sp1"),c("ind","Sp2"),c("ind","Sp3"),c("ind","ind"),c("ind","ind"),c("ind","ind"))
data_Espece=coll_interaction$new(dons[c(1:3,9:11)],mGP,type=c(rep("inc",3),c("diradj"),3))
RES_NEW_MODEL <- data_Vanesse$search_nb_clusters(vK_init=c(4,4),Kmin=c(1,1),Kmax=c(10,10))
data_Espece=coll_interaction$new(dons[c(1:3,9:11)],mGP,type=c(rep("inc",3),c("diradj"),3))
data_SP=coll_interaction$new(dons[c(1:3,9:11)],mGP,type=c(rep("inc",3),c("diradj"),3))
mGP
unique(as.vector(mGP))
(as.vector(mGP))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(2,2,1,2),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(2,2,1,2),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(1,1,1,1),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(2,2,1,2),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(3,3,2,3),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
best_estim_SP <- RES_SP[[length(SP)]]
RES_SP
best_estim_SP <- RES_SP[[length(RES_SP)]]
best_estim_SP
RES_SP <- data_SP$search_nb_clusters(vK_init=c(3,3,2,3),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
best_estim_SP <- RES_SP[[length(RES_SP)]]
param_estim_SP <- best_estim_SP$param_estim
param_estim_SP
plot_res(data_Vanesse,param_estim_NEW_MODEL,mycol=c('green','yellow'),thres=.1)
plot_res(data_SP,param_estim_SP,mycol=c('green','yellow'),thres=.1)
plot_res(data_SP,param_estim_SP,mycol=c('red','yellow','green','blue'),thres=.1)
plot_res(data_SP,param_estim_SP,mycol=c('red','yellow','green','blue'),thres=.1)
RES_SP <- data_SP$search_nb_clusters(vK_init=c(2,2,1,2),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(1,1,1,1),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(3,3,2,3),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
best_estim_SP <- RES_SP[[length(RES_SP)]]
param_estim_SP <- best_estim_SP$param_estim
plot_res(data_SP,param_estim_SP,mycol=c('red','yellow','green','blue'),thres=.1)
plot_res(data_SP,param_estim_SP,mycol=c('red','yellow','green','blue'),thres=.1)
plot_res(data_SP,param_estim_SP,mycol=c('red','yellow','green','blue'),thres=.1)
mGPvar=rbind(c("ind","Var1"),c("ind","Var2"),c("ind","Var3"),c("ind","ind"),c("ind","ind"),c("ind","ind"))
data_Var=coll_interaction$new(dons[c(5:7,9:11)],mGPvar,type=c(rep("inc",3),c("diradj"),3))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(2,3,3,3),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(1,1,1,1),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(3,3,3,3),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(4,4,4,4),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(4,4,4,4),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))#best
RES_Var <- data_Var$search_nb_clusters(vK_init=c(5,5,5,5),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))
best_estim_Var <- RES_Var[[length(RES_Var)]]
param_estim_Var <- best_estim_Var$param_estim
plot_res(data_Var,param_estim_Var,mycol=c('red','yellow','green','blue'),thres=.1)
plot_res(data_Var,param_estim_Var,mycol=c('red','yellow','green','blue'),thres=.1)
plot_res(data_Var,param_estim_Var,mycol=c('red','yellow','green','blue'),thres=.1)
plot_res(data_Var,param_estim_Var,mycol=c('red','yellow','green','blue'),thres=.1)
plot_res(data_Var,param_estim_Var,mycol=c('red','yellow','green','blue'),thres=.2)
plot_res(data_Var,param_estim_Var,mycol=c('red','yellow','green','blue'),thres=.2)
rm(list=ls())
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/")
source("functions/BM_POO.R")
setwd("~/Dropbox/Multiplex/Ecologie/Code/generalized_multi_BM/realdata/sophie_vanuatu/")
invS1=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_1.csv",header=TRUE)
invS2=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_2.csv",header=TRUE)
invS3=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_3.csv",header=TRUE)
invSall=read.table("rersultatsclusteringespcesetpaysans/inventory_species_use_all.csv",header=TRUE)
invV1=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_1.csv",header=TRUE)
invV2=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_2.csv",header=TRUE)
invV3=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_3.csv",header=TRUE)
invVall=read.table("rersultatsclusteringespcesetpaysans/inventory_variety_use_all.csv",header=TRUE)
circ1=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use1_ind_ssloop.csv",header = TRUE)
circ2=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use2_ind_ssloop.csv",header = TRUE)
circ3=read.table("rersultatsclusteringespcesetpaysans/ssna_adj_30n_use3_ind_ssloop.csv",header = TRUE)
dons=list(invS1,invS2,invS3,invSall,invV1,invV2,invV3,invVall,circ1,circ2,circ3)
for (i in 1:length(dons))
{
dons[[i]][dons[[i]]>1]=1
dons[[i]]=as.matrix(dons[[i]])
}
mGPsp=rbind(c("ind","Sp1"),c("ind","Sp2"),c("ind","Sp3"),c("ind","ind"),c("ind","ind"),c("ind","ind"))
data_SP=coll_interaction$new(dons[c(1:3,9:11)],mGPsp,type= c(rep("inc",3),rep("diradj",3)))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(2,2,1,2),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(1,1,1,1),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6))
RES_SP <- data_SP$search_nb_clusters(vK_init=c(3,3,2,3),Kmin=c(1,1,1,1),Kmax=c(6,6,2,6)) #meilleur !!!
mGPvar=rbind(c("ind","Var1"),c("ind","Var2"),c("ind","Var3"),c("ind","ind"),c("ind","ind"),c("ind","ind"))
data_Var=coll_interaction$new(dons[c(5:7,9:11)],mGPvar,type = c(rep("inc",3),rep("diradj",3)))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(2,3,3,3),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(1,1,1,1),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(3,3,3,3),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))
RES_Var <- data_Var$search_nb_clusters(vK_init=c(4,4,4,4),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))#best
RES_Var <- data_Var$search_nb_clusters(vK_init=c(5,5,5,5),Kmin=c(1,1,1,1),Kmax=c(6,10,10,10))#as best
best_estim_Var <- RES_Var[[length(RES_Var)]]
param_estim_Var <- best_estim_Var$param_estim
plot_res(data_Var,param_estim_Var,mycol=c('red','yellow','green','blue'),thres=.2)
rm(list=ls())
library(GREMLIN)
rm(list=ls())
setwd("D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON/VANUATU/MIRES")
ssna_adj_30n_all_ind_ssloop <- read.csv("D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON/VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
View(ssna_adj_30n_all_ind_ssloop)
setwd <- "D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON/VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
setwd <- "D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON"
data_relation <-  read.csv("/VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
data_relation <-  read.csv("VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
setwd <- "D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON"
data_relation <-  read.csv(file  = "/VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
getwd()
setwd <- "D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON"
data_relation <-  read.csv(file  = "/ssna_adj_30n_all_ind_ssloop.csv")
setwd <- "D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON"
data_relation <-  read.csv(file  = "/VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
data_relation <-  read.csv(file  = "VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
setwd("D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON")
data_relation <-  read.csv(file  = "VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
data_relation
data_relation_bin <- as.numeric(datarelation>0)
data_relation_bin <- as.numeric(data_relation>0)
data_relation_bin <- as.numeric(data_relation > 0)
data_relation <-  read.csv(file  = "VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
deta_relation <- as.numeric(data_relation)
data_relation <- as.numeric(data_relation)
str(data_relation)
data_relation <- as.matrix(data_relation)
data_relation <- as.numeric(data_relation)
data_relation
data_relation <-  read.csv(file  = "VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
dim(data_relation)
data_relation <- data_relation[,-1]
data_relation
data_relation <- as.matrix(data_relation[, -1])
data_relation
data_relation <- as.numeric(data_relation)
data_relation
data_relation <- data_relation[, -1]
data_relation <-  read.csv(file  = "VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
data_relation <- data_relation[, -1]
data_relation <- as.numeric(data_relation)
setwd("D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON")
data_relation <-  read.csv(file  = "VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
data_relation <- data_relation[, -1]
data_relation <- data_relation
data_relation
is.matrix(data_relation)
dim(data_relation)
data_relation <- data_relation[1:30,1:30]
is.matrix(data_relation)
is.matrix(as.matrix(data_relation))
dim(is.matrix(as.matrix(data_relation)))
dim(as.matrix(data_relation))
data_relation <- as.matrix(data_relation[1:30,1:30])
data_relation
str(data_relation)
as.numeric(data_relation > 0)
data_relation <-
data_relation_bin <- data_relation>0 * data_relation
data_relation_bin
data_relation <-
data_relation_bin <- (data_relation>0) * data_relation
data_relation_bin
data_relation <-  read.csv(file  = "VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv")
data_relation <- data_relation[, -1]
data_relation <- as.matrix(data_relation[1:30,1:30])
data_relation_bin <- (data_relation>0) * data_relation
library(igraph)
help("plot.igraph")
help("from_adjacency")
gbin < graph_from_adjacency_matrix(data_relation_bin,mode = "directed", diag=FALSE )
gbin <- graph_from_adjacency_matrix(data_relation_bin,mode = "directed", diag=FALSE )
plot.igraph(gbin)
colnames(data_relation_bin) <- 1:30
library(igraph)
gbin <- graph_from_adjacency_matrix(data_relation_bin,mode = "directed", diag=FALSE )
plot.igraph(gbin)
plot.igraph(gbin, layout = "nicely")
help("layout.circle")
gbin$layout = circle
gbin$layout = "circle"
plot.igraph(gbin)
g <- graph_from_adjacency_matrix(data_relation_bin,mode = "directed", diag=FALSE )
plot.igraph(g,layout=layout.circle,
vertex.label.family="Palatino",
edge.label.family="Palatino",
edge.label.cex=0.7,
vertex.size=log(V(g)$community_size)+7,
vertex.label=V(g)$community_size,
edge.width=log(E(g)$weight),
edge.label=E(g)$weight)
V(g)
V(g)$comminty
library(igraph)
g <- graph_from_adjacency_matrix(data_relation_bin,mode = "directed", diag=FALSE )
plot.igraph(g,layout=layout.circle,
vertex.label.family="Palatino",
edge.label.family="Palatino",
edge.label.cex=0.7,
)
plot.igraph(g,layout=layout.circle,
edge.label.cex=0.7)
plot.igraph(g,layout=layout.circle,
edge.label.cex=0.7,arrow.size  = 0.7)
plot.igraph(g,layout=layout.circle,
edge.label.cex=0.7,arrow.size  = 0.4)
plot.igraph(g,layout=layout.circle,
edge.label.cex=0.7,arrow.size  = 0.4)
plot.igraph(g,layout=layout.circle,
edge.label.cex=0.7,arrow.size  = 0.1)
plot.igraph(g,layout=layout.circle,
edge.label.cex=0.7,arrow.size  = 0.1)
library(igraph)
g <- graph_from_adjacency_matrix(data_relation_bin,mode = "directed", diag=FALSE )
plot.igraph(g,layout=layout.circle,
edge.label.cex=0.7,arrow.size  = 0.1, arrow.width = 0.5)
library(igraph)
g <- graph_from_adjacency_matrix(data_relation_bin,mode = "directed", diag=FALSE )
plot.igraph(g,layout=layout.circle,
edge.label.cex=0.7,arrow.size  = 0.1, arrow.width = 0.5)
plot.igraph(g,
edge.label.cex=0.7,arrow.size  = 0.1, arrow.width = 0.5)
plot.igraph(g,
edge.label.cex=0.7,arrow.size  = 0.01, arrow.width = 0.5)
############ DATA VANUATU RELATIONS
data_relation <-  read.csv(file  = paste(file_data,"VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv",sep='/'))
rm(list=ls())
library(GREMLIN)
file_data <- "D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON"
rm(list=ls())
library(GREMLIN)
library(blockmodels)
library(igraph)
library(alluvial)
source('function_for_blockmodels.R')
setwd("C:/Users/Donnet/Dropbox/WORK_DROPBOX/RECHERCHE_en_cours/CONFERENCE_EXPOSES/EXPOSES/2019/2019-05-GDR-Resodiv/codes")
setwd("C:/Users/Donnet/Dropbox/WORK_DROPBOX/RECHERCHE_en_cours/CONFERENCE_EXPOSES/EXPOSES/2019/2019-05-GDR-Resodiv/codes")
file_data <- "D:/WORK_ALL/RECHERCHE/TRAVAUX_RECHERCHE/Avner-Pierre/MULTIPARTITE/CODES/APPLICATIONS_DONNEES_REELLES/CAILLON"
############ DATA VANUATU RELATIONS
data_relation <-  read.csv(file  = paste(file_data,"VANUATU/MIRES/ssna_adj_30n_all_ind_ssloop.csv",sep='/'))
data_relation <- data_relation[, -1]
data_relation <- as.matrix(data_relation[1:30,1:30])
data_relation_bin <- (data_relation>0) * data_relation
rownames(data_relation_bin) <- 1:30
colnames(data_relation_bin) <- 1:30
help("BM_bernoulli")
sbm.relations <- BM_bernoulli("SBM",data_relation_bin)
sbm.relations$estimate()
data_relation_bin
data_relation <- as.matrix(data_relation[1:30,1:30])
data_relation_bin <- (data_relation>0)* matrix(1,30,30)
rownames(data_relation_bin) <- 1:30
colnames(data_relation_bin) <- 1:30
g <- graph_from_adjacency_matrix(data_relation_bin,mode = "directed", diag=FALSE )
plot.igraph(g, edge.label.cex=0.7,arrow.size  = 0.01, arrow.width = 0.5)
sbm.relations <- BM_bernoulli("SBM",data_relation_bin)
sbm.relations$estimate()
Q = which.max(sbm.relations$ICL)
paramEstimSBM <- extractParamBM(sbm.relations,Q)
source('function_for_blockmodels.R')
paramEstimSBM <- extractParamBM(sbm.relations,Q)
G <- graph_from_adjacency_matrix(paramEstimSBM$alpha, mode = c("directed"), weighted = TRUE, diag = TRUE)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*3,vertex.color = 1:Q, layout = layout_nicely)
source('C:/Users/Donnet/Dropbox/WORK_DROPBOX/RECHERCHE_en_cours/CONFERENCE_EXPOSES/EXPOSES/2019/2019-05-GDR-Resodiv/codes/function_for_blockmodels.R', encoding = 'UTF-8')
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*3,vertex.color = 1:Q, layout = layout_nicely)
G <- graph_from_adjacency_matrix(paramEstimSBM$alpha, mode = c("directed"), weighted = TRUE, diag = TRUE)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*3,vertex.color = 1:Q, layout = layout_nicely)
plotNetBM(sbm.relations)
plotNetBM(sbm.relations,Q)
plotNetBM(sbm.relations,Q)
source('C:/Users/Donnet/Dropbox/WORK_DROPBOX/RECHERCHE_en_cours/CONFERENCE_EXPOSES/EXPOSES/2019/2019-05-GDR-Resodiv/codes/function_for_blockmodels.R', encoding = 'UTF-8')
source('C:/Users/Donnet/Dropbox/WORK_DROPBOX/RECHERCHE_en_cours/CONFERENCE_EXPOSES/EXPOSES/2019/2019-05-GDR-Resodiv/codes/function_for_blockmodels.R', encoding = 'UTF-8')
source('C:/Users/Donnet/Dropbox/WORK_DROPBOX/RECHERCHE_en_cours/CONFERENCE_EXPOSES/EXPOSES/2019/2019-05-GDR-Resodiv/codes/function_for_blockmodels.R', encoding = 'UTF-8')
plotNetBM(sbm.relations,Q)
source('C:/Users/Donnet/Dropbox/WORK_DROPBOX/RECHERCHE_en_cours/CONFERENCE_EXPOSES/EXPOSES/2019/2019-05-GDR-Resodiv/codes/function_for_blockmodels.R', encoding = 'UTF-8')
plotNetBM(sbm.relations,Q)
BMobject <- sbm.relations
membership_name <-  BMobject$membership_name
membership_name
a <- extractParamBM(BMobject,Q)$alpha
b <- extractParamBM(BMobject,Q)$pi
c <- extractParamBM(BMobject,Q)$piRow
d <- extractParamBM(BMobject,Q)$piCol
G <- graph_from_adjacency_matrix(a, mode = c("directed"), weighted = TRUE, diag = TRUE)
plot.igraph(G,vertex.size = b * 100,curved = 0.4,edge.width = sqrt(abs(E(G)$weight)),vertex.color = 1:Q, layout = layout_nicely)
plot.igraph(G,vertex.size = b * 100,curved = TRUE,edge.width = sqrt(abs(E(G)$weight)),vertex.color = 1:Q, layout = layout_nicely)
plot.igraph(G,curved = TRUE,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*3,vertex.color = 1:Q, layout = layout_nicely)
G <- graph_from_adjacency_matrix(paramEstimSBM$alpha, mode = c("directed"), weighted = TRUE, diag = TRUE)
plot.igraph(G,curved = TRUE,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*3,vertex.color = 1:Q, layout = layout_nicely)
E(G)$weight
plot.igraph(G,curved = TRUE,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*10,vertex.color = 1:Q, layout = layout_nicely)
plot.igraph(G,curved = TRUE,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*5,vertex.color = 1:Q, layout = layout_nicely)
plot.igraph(G,curved = 1,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*5,vertex.color = 1:Q, layout = layout_nicely)
G %>% set_edge_attr("curved", value=0.6)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*5,vertex.color = 1:Q, layout = layout_nicely)
plotMatrix(data_relation_bin,'Foyer','Foyer', fileNameSave = NULL, clustering = list(row = paramEstimSBM$Z))
G %>% set_edge_attr("curved", value=0.6)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,edge.width= abs(E(G)$weight)*5,vertex.color = 1:Q, layout = layout_nicely)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,vertex.color = 1:Q, layout = layout_nicely)
paramEstimSBM$alpha
G %>% set_edge_attr("curved", value=0.6)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,vertex.color = 1:Q, layout = layout_nicely)
G %>% set_edge_attr("curved", value=2)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,vertex.color = 1:Q, layout = layout_nicely)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,vertex.color = 1:Q)
G <- graph_from_adjacency_matrix(paramEstimSBM$alpha, mode = c("directed"), weighted = TRUE, diag = TRUE)
G %>% set_edge_attr("curved", value=2)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,vertex.color = 1:Q)
G %>% set_edge_attr("curved", value=10)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,vertex.color = 1:Q)
G %>% set_edge_attr("curved", value=100)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,vertex.color = 1:Q)
G <- graph_from_adjacency_matrix(paramEstimSBM$alpha, mode = c("directed"), weighted = TRUE, diag = TRUE)
G %>% set_edge_attr("curved", value=100)
plot.igraph(G,vertex.size = paramEstimSBM$pi*100,vertex.color = 1:Q)
plotMatrix(Mat = data_relation_bin,rowFG = 'foyer', colFG  = 'foyer')
source('C:/Users/Donnet/Dropbox/WORK_DROPBOX/RECHERCHE_en_cours/CONFERENCE_EXPOSES/EXPOSES/2019/2019-05-GDR-Resodiv/codes/function_for_blockmodels.R', encoding = 'UTF-8')
